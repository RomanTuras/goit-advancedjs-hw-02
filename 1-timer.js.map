{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// Timer\n\nimport flatpickr from \"flatpickr\";\nimport iziToast from \"izitoast\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst cal = document.getElementById(\"datetime-picker\");\nconst btn = document.querySelector(\"[data-start]\")\nconst days = document.querySelector(\"[data-days]\");\nconst hours = document.querySelector(\"[data-hours]\");\nconst minutes = document.querySelector(\"[data-minutes]\");\nconst seconds = document.querySelector(\"[data-seconds]\");\n\nlet userSelectedDate;\nlet intervalId = 0;\nlet c = 0; // QA\n\nbtn.disabled = true\n\n// Validate selected date\nconst validateDate = date => {\n  const today = new Date();\n  if ((date - today) <= 0) {\n    btn.disabled = true;\n    iziToast.settings({\n      position: 'topRight',\n      transitionIn: 'flipInX',\n      transitionOut: 'flipOutX',\n    });\n    iziToast.error({\n      message: \"Please choose a date in the future\"\n    });\n    return;\n  }\n  userSelectedDate = date;\n  btn.disabled = false;\n}\n\n// Options for flatpickr\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    validateDate(selectedDates[0])\n  },\n};\n\n// init flatpickr\nflatpickr(cal, options);\n\n// Add a leading zero\nconst addLeadingZero = value => {\n  return value.padStart(2, '0');\n}\n\n// Rendering timer value\nconst render = value => {\n  days.innerHTML = value.days;\n  hours.innerHTML = addLeadingZero(String(value.hours));\n  minutes.innerHTML = addLeadingZero(String(value.minutes));\n  seconds.innerHTML = addLeadingZero(String(value.seconds));\n}\n\n// Countdown logic\nconst countDown = () => {\n  let difference = userSelectedDate - new Date();\n  let value = convertMs(difference);\n  // c++ // QA\n  if (c == 10 || difference <= 1000) {\n    clearInterval(intervalId);\n    cal.disabled = false;\n  }\n  render(value);\n}\n\n// Starting timer\nconst startTimer = () => {\n  btn.disabled = true;\n  cal.disabled = true;\n  intervalId = setInterval(countDown, 1000);\n}\n\nbtn.addEventListener(\"click\", startTimer);\n\n// Converting ms\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}"],"names":["cal","btn","days","hours","minutes","seconds","userSelectedDate","intervalId","validateDate","date","iziToast","options","selectedDates","flatpickr","addLeadingZero","value","render","countDown","difference","convertMs","startTimer","ms"],"mappings":"+IAQA,MAAMA,EAAM,SAAS,eAAe,iBAAiB,EAC/CC,EAAM,SAAS,cAAc,cAAc,EAC3CC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAQ,SAAS,cAAc,cAAc,EAC7CC,EAAU,SAAS,cAAc,gBAAgB,EACjDC,EAAU,SAAS,cAAc,gBAAgB,EAEvD,IAAIC,EACAC,EAAa,EAGjBN,EAAI,SAAW,GAGf,MAAMO,EAAeC,GAAQ,CAE3B,GAAKA,EADS,IAAI,MACI,EAAG,CACvBR,EAAI,SAAW,GACfS,EAAS,SAAS,CAChB,SAAU,WACV,aAAc,UACd,cAAe,UACrB,CAAK,EACDA,EAAS,MAAM,CACb,QAAS,oCACf,CAAK,EACD,MACD,CACDJ,EAAmBG,EACnBR,EAAI,SAAW,EACjB,EAGMU,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBJ,EAAaI,EAAc,CAAC,CAAC,CAC9B,CACH,EAGAC,EAAUb,EAAKW,CAAO,EAGtB,MAAMG,EAAiBC,GACdA,EAAM,SAAS,EAAG,GAAG,EAIxBC,EAASD,GAAS,CACtBb,EAAK,UAAYa,EAAM,KACvBZ,EAAM,UAAYW,EAAe,OAAOC,EAAM,KAAK,CAAC,EACpDX,EAAQ,UAAYU,EAAe,OAAOC,EAAM,OAAO,CAAC,EACxDV,EAAQ,UAAYS,EAAe,OAAOC,EAAM,OAAO,CAAC,CAC1D,EAGME,EAAY,IAAM,CACtB,IAAIC,EAAaZ,EAAmB,IAAI,KACpCS,EAAQI,EAAUD,CAAU,EAEjBA,GAAc,MAC3B,cAAcX,CAAU,EACxBP,EAAI,SAAW,IAEjBgB,EAAOD,CAAK,CACd,EAGMK,EAAa,IAAM,CACvBnB,EAAI,SAAW,GACfD,EAAI,SAAW,GACfO,EAAa,YAAYU,EAAW,GAAI,CAC1C,EAEAhB,EAAI,iBAAiB,QAASmB,CAAU,EAGxC,SAASD,EAAUE,EAAI,CAQrB,MAAMnB,EAAO,KAAK,MAAMmB,EAAK,KAAG,EAE1BlB,EAAQ,KAAK,MAAOkB,EAAK,MAAO,IAAI,EAEpCjB,EAAU,KAAK,MAAQiB,EAAK,MAAO,KAAQ,GAAM,EAEjDhB,EAAU,KAAK,MAASgB,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAnB,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}